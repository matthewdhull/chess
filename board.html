  <!DOCTYPE html>
<head>
  <title>board</title>
  <meta charset="utf-8">
  <link rel="shortcut icon" href="">
  <style>
	  * {
		  font-family: sans-serif;
	  }
	 svg g text {
		 font-size: 9pt;
	 }
  </style>
 </head>
<body>
  <script src="lib/d3/d3.min.js"></script>
  <script>

	const size = 8
	const squareStrokeWidth = 3
	const rectWidth = 50, rectHeight = rectWidth
	const lightSquareColor = '#dfe0e2'
	const darkSquareColor = '#a5a6a9'
	const squareStrokeColor = '#2f292b'
	var margin = {'right':30, 'left':3, 'top':3, 'bottom':30}
	

	// data generation
	const data = Array.from(Array(size**2).keys())	

	// scales + axes
	var xScale = d3.scaleLinear()
	.domain([25,50,400]).range([25,50,400])
	let xAxisTickLabels = ['A','B','C','D','E','F','G','H'];
  	xAxis = d3.axisBottom(xScale)
  		.tickFormat((d,i) => xAxisTickLabels[i])

  	var yScale = d3.scaleLinear()
  		.domain([25,50,400]).range([25,50,400])
  	let yAxisTickLabels = ['1','2','3','4','5','6','7','8']
  	yAxis = d3.axisRight(yScale)
  		.tickFormat((d,i) => yAxisTickLabels[i])

  	// construct hash of board position names and coordinates
  	var positions = {}
	var i = 0
	const yReverse = yAxisTickLabels.reverse()
	while(i < xAxisTickLabels.length) {
	    var j = 0
		while(j < yAxisTickLabels.length) {
			rank = yReverse[j]
			file = xAxisTickLabels[i]
			x = i * (rectWidth) + (rectWidth/2)+squareStrokeWidth
			y = rank * (rectHeight) - (rectHeight/2)+squareStrokeWidth
		    positions[file.concat('',rank)] = [x,y]
 		    j++
		}
		i++
	}

  	
  	function getPositionLabel(d){
	  	//iterate on data
	  	// return 'E5', 'E4', etc.
  		f = xAxisTickLabels[Math.floor(d/8)]
  		r = yAxisTickLabels[d % 8]
  		return f.concat('', r)	  	
  	}
  	
  	
  	var svg = d3.select('body')
  		.append('svg')
  		.attr('height', (rectHeight * size) + margin.top + margin.bottom)
  		.attr('width', (rectWidth * size) + margin.right + margin.left)
  	
  	// board 
  	svg.append("g")
  		.attr("transform", "translate("+squareStrokeWidth+","+squareStrokeWidth+")")
  		.selectAll('rect')
  		.data(data)
  		.enter()
  		.append('rect')
        .attr('x', function (d) {
			return Math.floor(d / size) * rectWidth 
        })
  		.attr('y', function(d){
  			return (d % size) * rectHeight
  		})
  		.attr('width', rectWidth)
  		.attr('height', rectHeight)
  		.attr('stroke-width', squareStrokeWidth)
  		.attr('stroke', squareStrokeColor)
  		.attr('fill', function(d){
	  		if( Math.floor(d / size) % 2 == 0 ){
		  		if ((d % 2) == 0){
			  		return lightSquareColor		  		
		  		}
		  		return darkSquareColor
		  	}
	  		if ((d % 2) == 0){
				return darkSquareColor		  		
		  	}
		  	return lightSquareColor
  		})
  		.on('mouseover', function(d){
  			square = getPositionLabel(d)
	  		s = 'Position: '		
	  		d3.select("#positionDisplay")
	  			.text(s.concat('',square))
  		})
  		.on('mouseout',function(){
  			d3.select("#positionDisplay")
  			.text('Position: ')
  		})
	
	// axes	
  	svg.append("g")
  		.attr("transform", "translate(-22,"+((rectWidth*size)+squareStrokeWidth)+")")
  		.call(xAxis)
  		.call(g => g.select(".domain").remove())  		

  	svg.append("g")
	  	.attr("transform", 
	  		"translate("+((rectHeight*size)+squareStrokeWidth)+",-22)") 
  		.call(yAxis)
  		.call(g => g.select(".domain").remove())  		
  	
  	// annotate square centers
	svg.append("g")
		.selectAll("circle")
		.data(Array.from(Object.keys(positions)))
		.enter()
		.append('circle')
		.attr('cx', function(d){
			return positions[d][0]
		})
		.attr('cy', function(d){
			return positions[d][1]
		})
		.attr('r', function(d){
			return 11
		})
		.attr('stroke', 'black')
		.attr('fill', 'white')  	
  	
  	
  	// board position annotations
  	svg.append("g")
  		.selectAll("text")
  		.data(data)
  		.enter()
  		.append("text")
  		.attr('x', function(d){
	  		return (Math.floor(d / size) * rectWidth) + 20.4
   		})
  		.attr('y', function(d){	
	  		m = d % size
	  		return (m * rectHeight) + 32.5
  		})
  		.text(function(d){
	  		return getPositionLabel(d)
  		})

  		
    </script>
    <div id="positionDisplay">(Hover) Position:</div>
</body>
